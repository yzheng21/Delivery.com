{"version":3,"sources":["timeline.js"],"names":["timeline","collection","options","timelines","warningLabel","winWidth","window","innerWidth","winHeight","innerHeight","forceVerticalMode","resizeTimer","currentIndex","defaultValue","type","acceptedValues","moveItems","startIndex","verticalTrigger","itemWrap","el","wrapper","classes","classList","add","parentNode","insertBefore","appendChild","isElementInViewport","triggerPosition","rect","getBoundingClientRect","windowHeight","document","documentElement","clientHeight","defaultTrigger","defaultSettings","match","triggerUnit","value","console","triggerValue","warn","trigger","parseInt","left","clientWidth","height","addTransforms","transform","style","webkitTransform","msTransform","tl","timelineEl","removeChild","topPosition","items","offsetLeft","horizontalDivider","setUpHorinzontalTimeline","navArrows","arrowPrev","arrowNext","position","str","disabled","item","settings","itemWidth","wrap","offsetWidth","visibleItems","forEach","length","scrollerWidth","scroller","width","evenIndexTallest","oddIndexTallest","i","horizontalStartPosition","setHeights","timelinePosition","prevArrow","createElement","setWidths","nextArrow","className","textContent","top","addNavigation","divider","querySelector","addHorizontalDivider","querySelectorAll","arrow","addEventListener","e","preventDefault","this","contains","maxIndex","removeAttribute","remove","opacity","call","resetTimelines","setUpTimelines","setHeightandWidths","lastVisibleIndex","setUpVerticalTimeline","verticalStartPosition","push","timelineName","id","errorPart","data","createTimelines","Error","slice","children","message","Object","keys","key","settingName","testValues","indexOf","triggerArray","_triggerArray","_slicedToArray","triggerValid","_defaultTrigger2","unit","setTimeout","newWinWidth","newWinHeight","jQuery"],"mappings":"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","file":"timeline.min.js","sourcesContent":["function timeline(collection, options) {\r\n  const timelines = [];\r\n  const warningLabel = 'Timeline:';\r\n  let winWidth = window.innerWidth;\r\n  let winHeight = window.innerHeight;\r\n  let resizeTimer;\r\n  let currentIndex = 0;\r\n  // Set default settings\r\n  const defaultSettings = {\r\n    forceVerticalMode: {\r\n      type: 'integer',\r\n      defaultValue: 600\r\n    },\r\n    horizontalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['bottom', 'top'],\r\n      defaultValue: 'top'\r\n    },\r\n    mode: {\r\n      type: 'string',\r\n      acceptedValues: ['horizontal', 'vertical'],\r\n      defaultValue: 'vertical'\r\n    },\r\n    moveItems: {\r\n      type: 'integer',\r\n      defaultValue: 1\r\n    },\r\n    startIndex: {\r\n      type: 'integer',\r\n      defaultValue: 0\r\n    },\r\n    verticalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['left', 'right'],\r\n      defaultValue: 'left'\r\n    },\r\n    verticalTrigger: {\r\n      type: 'string',\r\n      defaultValue: '15%'\r\n    },\r\n    visibleItems: {\r\n      type: 'integer',\r\n      defaultValue: 3\r\n    }\r\n  };\r\n\r\n  // Helper function to test whether values are an integer\r\n  function testValues(value, settingName) {\r\n    if (typeof value !== 'number' && value % 1 !== 0) {\r\n      console.warn(`${warningLabel} The value \"${value}\" entered for the setting \"${settingName}\" is not an integer.`);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Helper function to wrap an element in another HTML element\r\n  function itemWrap(el, wrapper, classes) {\r\n    wrapper.classList.add(classes);\r\n    el.parentNode.insertBefore(wrapper, el);\r\n    wrapper.appendChild(el);\r\n  }\r\n\r\n  // Helper function to wrap each element in a group with other HTML elements\r\n  function wrapElements(items) {\r\n    items.forEach((item) => {\r\n      itemWrap(item.querySelector('.timeline__content'), document.createElement('div'), 'timeline__content__wrap');\r\n      itemWrap(item.querySelector('.timeline__content__wrap'), document.createElement('div'), 'timeline__item__inner');\r\n    });\r\n  }\r\n\r\n  // Helper function to check if an element is partially in the viewport\r\n  function isElementInViewport(el, triggerPosition) {\r\n    const rect = el.getBoundingClientRect();\r\n    const windowHeight = window.innerHeight || document.documentElement.clientHeight;\r\n    const defaultTrigger = defaultSettings.verticalTrigger.defaultValue.match(/(\\d*\\.?\\d*)(.*)/);\r\n    let triggerUnit = triggerPosition.unit;\r\n    let triggerValue = triggerPosition.value;\r\n    let trigger = windowHeight;\r\n    if (triggerUnit === 'px' && triggerValue >= windowHeight) {\r\n      console.warn('The value entered for the setting \"verticalTrigger\" is larger than the window height. The default value will be used instead.');\r\n      [, triggerValue, triggerUnit] = defaultTrigger;\r\n    }\r\n    if (triggerUnit === 'px') {\r\n      trigger = parseInt(trigger - triggerValue, 10);\r\n    } else if (triggerUnit === '%') {\r\n      trigger = parseInt(trigger * ((100 - triggerValue) / 100), 10);\r\n    }\r\n    return (\r\n      rect.top <= trigger\r\n      && rect.left <= (window.innerWidth || document.documentElement.clientWidth)\r\n      && (rect.top + rect.height) >= 0\r\n      && (rect.left + rect.width) >= 0\r\n    );\r\n  }\r\n\r\n  // Helper function to add transform styles\r\n  function addTransforms(el, transform) {\r\n    el.style.webkitTransform = transform;\r\n    el.style.msTransform = transform;\r\n    el.style.transform = transform;\r\n  }\r\n\r\n  // Create timelines\r\n  function createTimelines(timelineEl) {\r\n    const timelineName = timelineEl.id ? `#${timelineEl.id}` : `.${timelineEl.className}`;\r\n    const errorPart = 'could not be found as a direct descendant of';\r\n    const data = timelineEl.dataset;\r\n    let wrap;\r\n    let scroller;\r\n    let items;\r\n    const settings = {};\r\n\r\n    // Test for correct HTML structure\r\n    try {\r\n      wrap = timelineEl.querySelector('.timeline__wrap');\r\n      if (!wrap) {\r\n        throw new Error(`${warningLabel} .timeline__wrap ${errorPart} ${timelineName}`);\r\n      } else {\r\n        scroller = wrap.querySelector('.timeline__items');\r\n        if (!scroller) {\r\n          throw new Error(`${warningLabel} .timeline__items ${errorPart} .timeline__wrap`);\r\n        } else {\r\n          items = [].slice.call(scroller.children, 0);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e.message);\r\n      return false;\r\n    }\r\n\r\n    // Test setting input values\r\n    Object.keys(defaultSettings).forEach((key) => {\r\n      settings[key] = defaultSettings[key].defaultValue;\r\n\r\n      if (data[key]) {\r\n        settings[key] = data[key];\r\n      } else if (options && options[key]) {\r\n        settings[key] = options[key];\r\n      }\r\n\r\n      if (defaultSettings[key].type === 'integer') {\r\n        if (!settings[key] || !testValues(settings[key], key)) {\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      } else if (defaultSettings[key].type === 'string') {\r\n        if (defaultSettings[key].acceptedValues && defaultSettings[key].acceptedValues.indexOf(settings[key]) === -1) {\r\n          console.warn(`${warningLabel} The value \"${settings[key]}\" entered for the setting \"${key}\" was not recognised.`);\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Further specific testing of input values\r\n    const defaultTrigger = defaultSettings.verticalTrigger.defaultValue.match(/(\\d*\\.?\\d*)(.*)/);\r\n    const triggerArray = settings.verticalTrigger.match(/(\\d*\\.?\\d*)(.*)/);\r\n    let [, triggerValue, triggerUnit] = triggerArray;\r\n    let triggerValid = true;\r\n    if (!triggerValue) {\r\n      console.warn(`${warningLabel} No numercial value entered for the 'verticalTrigger' setting.`);\r\n      triggerValid = false;\r\n    }\r\n    if (triggerUnit !== 'px' && triggerUnit !== '%') {\r\n      console.warn(`${warningLabel} The setting 'verticalTrigger' must be a percentage or pixel value.`);\r\n      triggerValid = false;\r\n    }\r\n    if (triggerUnit === '%' && (triggerValue > 100 || triggerValue < 0)) {\r\n      console.warn(`${warningLabel} The 'verticalTrigger' setting value must be between 0 and 100 if using a percentage value.`);\r\n      triggerValid = false;\r\n    } else if (triggerUnit === 'px' && triggerValue < 0) {\r\n      console.warn(`${warningLabel} The 'verticalTrigger' setting value must be above 0 if using a pixel value.`);\r\n      triggerValid = false;\r\n    }\r\n\r\n    if (triggerValid === false) {\r\n      [, triggerValue, triggerUnit] = defaultTrigger;\r\n    }\r\n\r\n    settings.verticalTrigger = {\r\n      unit: triggerUnit,\r\n      value: triggerValue\r\n    };\r\n\r\n    if (settings.moveItems > settings.visibleItems) {\r\n      console.warn(`${warningLabel} The value of \"moveItems\" (${settings.moveItems}) is larger than the number of \"visibleItems\" (${settings.visibleItems}). The value of \"visibleItems\" has been used instead.`);\r\n      settings.moveItems = settings.visibleItems;\r\n    }\r\n\r\n    if (settings.startIndex >= (items.length - settings.visibleItems)) {\r\n      console.warn(`${warningLabel} The 'startIndex' setting must be between 0 and ${items.length - settings.visibleItems} for this timeline. The value of ${items.length - settings.visibleItems} has been used instead.`);\r\n      settings.startIndex = items.length - settings.visibleItems;\r\n    } else if (settings.startIndex < 0) {\r\n      console.warn(`${warningLabel} The 'startIndex' setting must be between 0 and ${items.length - settings.visibleItems} for this timeline. The value of 0 has been used instead.`);\r\n      settings.startIndex = 0;\r\n    }\r\n\r\n    timelines.push({\r\n      timelineEl,\r\n      wrap,\r\n      scroller,\r\n      items,\r\n      settings\r\n    });\r\n  }\r\n\r\n  if (collection.length) {\r\n    [].forEach.call(collection, createTimelines);\r\n  }\r\n\r\n  // Set height and widths of timeline elements and viewport\r\n  function setHeightandWidths(tl) {\r\n    // Set widths of items and viewport\r\n    function setWidths() {\r\n      tl.itemWidth = tl.wrap.offsetWidth / tl.settings.visibleItems;\r\n      tl.items.forEach((item) => {\r\n        item.style.width = `${tl.itemWidth}px`;\r\n      });\r\n      tl.scrollerWidth = tl.itemWidth * tl.items.length;\r\n      tl.scroller.style.width = `${tl.scrollerWidth}px`;\r\n    }\r\n\r\n    // Set height of items and viewport\r\n    function setHeights() {\r\n      let oddIndexTallest = 0;\r\n      let evenIndexTallest = 0;\r\n      tl.items.forEach((item, i) => {\r\n        item.style.height = 'auto';\r\n        const height = item.offsetHeight;\r\n        if (i % 2 === 0) {\r\n          evenIndexTallest = height > evenIndexTallest ? height : evenIndexTallest;\r\n        } else {\r\n          oddIndexTallest = height > oddIndexTallest ? height : oddIndexTallest;\r\n        }\r\n      });\r\n\r\n      const transformString = `translateY(${evenIndexTallest}px)`;\r\n      tl.items.forEach((item, i) => {\r\n        if (i % 2 === 0) {\r\n          item.style.height = `${evenIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition === 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            addTransforms(item, transformString);\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        } else {\r\n          item.style.height = `${oddIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition !== 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            addTransforms(item, transformString);\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        }\r\n      });\r\n      tl.scroller.style.height = `${evenIndexTallest + oddIndexTallest}px`;\r\n    }\r\n\r\n    if (window.innerWidth > tl.settings.forceVerticalMode) {\r\n      setWidths();\r\n      setHeights();\r\n    }\r\n  }\r\n\r\n  // Create and add arrow controls to horizontal timeline\r\n  function addNavigation(tl) {\r\n    if (tl.items.length > tl.settings.visibleItems) {\r\n      const prevArrow = document.createElement('button');\r\n      const nextArrow = document.createElement('button');\r\n      const topPosition = tl.items[0].offsetHeight;\r\n      prevArrow.className = 'timeline-nav-button timeline-nav-button--prev';\r\n      nextArrow.className = 'timeline-nav-button timeline-nav-button--next';\r\n      prevArrow.textContent = 'Previous';\r\n      nextArrow.textContent = 'Next';\r\n      prevArrow.style.top = `${topPosition}px`;\r\n      nextArrow.style.top = `${topPosition}px`;\r\n      if (currentIndex === 0) {\r\n        prevArrow.disabled = true;\r\n      } else if (currentIndex + 1 === tl.items.length) {\r\n        nextArrow.disabled = true;\r\n      }\r\n      tl.timelineEl.appendChild(prevArrow);\r\n      tl.timelineEl.appendChild(nextArrow);\r\n    }\r\n  }\r\n\r\n  // Add the centre line to the horizontal timeline\r\n  function addHorizontalDivider(tl) {\r\n    const divider = tl.timelineEl.querySelector('.timeline-divider');\r\n    if (divider) {\r\n      tl.timelineEl.removeChild(divider);\r\n    }\r\n    const topPosition = tl.items[0].offsetHeight;\r\n    const horizontalDivider = document.createElement('span');\r\n    horizontalDivider.className = 'timeline-divider';\r\n    horizontalDivider.style.top = `${topPosition}px`;\r\n    tl.timelineEl.appendChild(horizontalDivider);\r\n  }\r\n\r\n  // Calculate the new position of the horizontal timeline\r\n  function timelinePosition(tl) {\r\n    const position = tl.items[currentIndex].offsetLeft;\r\n    const str = `translate3d(-${position}px, 0, 0)`;\r\n    addTransforms(tl.scroller, str);\r\n  }\r\n\r\n  // Make the horizontal timeline slide\r\n  function slideTimeline(tl) {\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    const arrowPrev = tl.timelineEl.querySelector('.timeline-nav-button--prev');\r\n    const arrowNext = tl.timelineEl.querySelector('.timeline-nav-button--next');\r\n    const maxIndex = tl.items.length - tl.settings.visibleItems;\r\n    const moveItems = parseInt(tl.settings.moveItems, 10);\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.addEventListener('click', function(e) {\r\n        e.preventDefault();\r\n        currentIndex = this.classList.contains('timeline-nav-button--next') ? (currentIndex += moveItems) : (currentIndex -= moveItems);\r\n        if (currentIndex === 0 || currentIndex < 0) {\r\n          currentIndex = 0;\r\n          arrowPrev.disabled = true;\r\n          arrowNext.disabled = false;\r\n        } else if (currentIndex === maxIndex || currentIndex > maxIndex) {\r\n          currentIndex = maxIndex;\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = true;\r\n        } else {\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = false;\r\n        }\r\n        timelinePosition(tl);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Set up horizontal timeline\r\n  function setUpHorinzontalTimeline(tl) {\r\n    currentIndex = tl.settings.startIndex;\r\n    tl.timelineEl.classList.add('timeline--horizontal');\r\n    setHeightandWidths(tl);\r\n    timelinePosition(tl);\r\n    addNavigation(tl);\r\n    addHorizontalDivider(tl);\r\n    slideTimeline(tl);\r\n  }\r\n\r\n  // Set up vertical timeline\r\n  function setUpVerticalTimeline(tl) {\r\n    let lastVisibleIndex = 0;\r\n    tl.items.forEach((item, i) => {\r\n      item.classList.remove('animated', 'fadeIn');\r\n      if (!isElementInViewport(item, tl.settings.verticalTrigger) && i > 0) {\r\n        item.classList.add('animated');\r\n      } else {\r\n        lastVisibleIndex = i;\r\n      }\r\n      const divider = tl.settings.verticalStartPosition === 'left' ? 1 : 0;\r\n      if (i % 2 === divider && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        item.classList.add('timeline__item--right');\r\n      } else {\r\n        item.classList.add('timeline__item--left');\r\n      }\r\n    });\r\n    for (let i = 0; i < lastVisibleIndex; i += 1) {\r\n      tl.items[i].classList.remove('animated', 'fadeIn');\r\n    }\r\n    // Bring elements into view as the page is scrolled\r\n    window.addEventListener('scroll', () => {\r\n      tl.items.forEach((item) => {\r\n        if (isElementInViewport(item, tl.settings.verticalTrigger)) {\r\n          item.classList.add('fadeIn');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Reset timelines\r\n  function resetTimelines(tl) {\r\n    tl.timelineEl.classList.remove('timeline--horizontal', 'timeline--mobile');\r\n    tl.scroller.removeAttribute('style');\r\n    tl.items.forEach((item) => {\r\n      item.removeAttribute('style');\r\n      item.classList.remove('animated', 'fadeIn', 'timeline__item--left', 'timeline__item--right');\r\n    });\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.parentNode.removeChild(arrow);\r\n    });\r\n  }\r\n\r\n  // Set up the timelines\r\n  function setUpTimelines() {\r\n    timelines.forEach((tl) => {\r\n      tl.timelineEl.style.opacity = 0;\r\n      if (!tl.timelineEl.classList.contains('timeline--loaded')) {\r\n        wrapElements(tl.items);\r\n      }\r\n      resetTimelines(tl);\r\n      if (window.innerWidth <= tl.settings.forceVerticalMode) {\r\n        tl.timelineEl.classList.add('timeline--mobile');\r\n      }\r\n      if (tl.settings.mode === 'horizontal' && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        setUpHorinzontalTimeline(tl);\r\n      } else {\r\n        setUpVerticalTimeline(tl);\r\n      }\r\n      tl.timelineEl.classList.add('timeline--loaded');\r\n      setTimeout(() => {\r\n        tl.timelineEl.style.opacity = 1;\r\n      }, 500);\r\n    });\r\n  }\r\n\r\n  // Initialise the timelines on the page\r\n  setUpTimelines();\r\n\r\n  window.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(() => {\r\n      const newWinWidth = window.innerWidth;\r\n      const newWinHeight = window.innerHeight;\r\n      if (newWinWidth !== winWidth || newWinHeight !== winHeight) {\r\n        setUpTimelines();\r\n        winWidth = newWinWidth;\r\n        winHeight = newWinHeight;\r\n      }\r\n    }, 250);\r\n  });\r\n}\r\n\r\n// Register as a jQuery plugin if the jQuery library is present\r\nif (window.jQuery) {\r\n  (($) => {\r\n    $.fn.timeline = function(opts) {\r\n      timeline(this, opts);\r\n      return this;\r\n    };\r\n  })(window.jQuery);\r\n}\r\n"]}